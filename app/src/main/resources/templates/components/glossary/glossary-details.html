<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>
<!-- Layout -->
<div th:fragment="tr" th:remove="tag">
    <tr class="bg-gray-50 border-b border-gray-200" x-show="!glossary.details.jobLoading">
        <td colspan="5">
            <div class="px-2 py-3 space-y-2 w-full">
                <!-- Tabs -->
                <div class="border-b border-gray-200">
                    <nav class="-mb-px flex space-x-4">
                        <button :class="glossaryConfigTabs.activeTab === 'info' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                                @click="glossaryConfigTabs.activeTab = 'info'; changeValue('glossaryConfigTabs', glossaryConfigTabs)"
                                class="whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-xs"
                                type="button">
                            Name info
                        </button>
                        <button :class="glossaryConfigTabs.activeTab === 'config' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                                @click="glossaryConfigTabs.activeTab = 'config'; changeValue('glossaryConfigTabs', glossaryConfigTabs)"
                                class="whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-xs"
                                type="button">
                            Related Items
                        </button>
                        <button :class="glossaryConfigTabs.activeTab === 'lines' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                                @click="glossaryConfigTabs.activeTab = 'lines'; changeValue('glossaryConfigTabs', glossaryConfigTabs)"
                                class="whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-xs"
                                type="button">
                            Lines
                        </button>
                        <button :class="glossaryConfigTabs.activeTab === 'replaceText' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                                @click="glossaryConfigTabs.activeTab = 'replaceText'; changeValue('glossaryConfigTabs', glossaryConfigTabs)"
                                class="whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-xs"
                                type="button">
                            Replace Text
                        </button>
                        <button :class="glossaryConfigTabs.activeTab === 'replaceSummary' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                                @click="glossaryConfigTabs.activeTab = 'replaceSummary'; changeValue('glossaryConfigTabs', glossaryConfigTabs)"
                                class="whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-xs"
                                type="button">
                            Replace Summary
                        </button>
                        <button :class="glossaryConfigTabs.activeTab === 'updateTranslatedName' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                                @click="glossaryConfigTabs.activeTab = 'updateTranslatedName'; changeValue('glossaryConfigTabs', glossaryConfigTabs)"
                                class="whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-xs"
                                type="button">
                            Update Translated Name
                        </button>
                    </nav>
                </div>

                <!-- Tab Content -->
                <template x-if="glossaryConfigTabs.activeTab === 'info'">
                    <div th:remove="tag" th:replace="~{components/glossary/object-info-tab::div}">
                        <p>
                            Here placed content of templates/components/glossary/object-info-tab.html page, tag
                            `th:fragment="div"`
                        </p>
                    </div>
                </template>

                <!-- Related Items Tab -->
                <template x-if="glossaryConfigTabs.activeTab === 'config'">
                    <div th:remove="tag" th:replace="~{components/glossary/related-items-tab::div}">
                        <p>
                            Here placed content of templates/components/glossary/related-items-tab.html page, tag
                            `th:fragment="div"`
                        </p>
                    </div>
                </template>

                <!-- Related Lines Tab -->
                <template x-if="glossaryConfigTabs.activeTab === 'lines'">
                    <div th:remove="tag" th:replace="~{components/glossary/related-lines-tab::div}">
                        <p>
                            Here placed content of templates/components/glossary/related-lines-tab.html page, tag
                            `th:fragment="div"`
                        </p>
                    </div>
                </template>

                <!-- Replace Text Tab -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-3"
                     x-show="glossaryConfigTabs.activeTab === 'replaceText'">
                    <div class="lg:col-span-2 space-y-2">
                        <div>
                            <label class="block font-medium text-gray-700 text-xs">Search Term</label>
                            <input class="mt-1 block w-full border border-gray-300 rounded shadow-sm py-1 px-2 focus:ring-indigo-500 focus:border-indigo-500 text-xs"
                                   type="text"
                                   x-model="glossary.details.replaceTextSearch">
                        </div>
                        <div>
                            <label class="block font-medium text-gray-700 text-xs">Replacement</label>
                            <input class="mt-1 block w-full border border-gray-300 rounded shadow-sm py-1 px-2 focus:ring-indigo-500 focus:border-indigo-500 text-xs"
                                   x-model="glossary.details.replaceTextReplacement">
                        </div>
                        <button @click="replaceGlossaryText(); changeValue('glossaryConfigTabs', glossaryConfigTabs)"
                                class="inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500">
                            Replace
                        </button>
                    </div>
                    <div>
                        <h4 class="font-medium text-gray-900 text-sm">Info</h4>
                        <p class="mt-1 text-xs text-gray-600">Search and replace specific terms across glossary
                            entries. Will call <code>mt_replace_text_for_column</code> function</p>
                    </div>
                </div>

                <!-- Replace Summary Tab -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-3"
                     x-show="glossaryConfigTabs.activeTab === 'replaceSummary'">
                    <div class="lg:col-span-2 space-y-2">
                        <div>
                            <label class="block font-medium text-gray-700 text-xs">Search Term</label>
                            <input class="mt-1 block w-full border border-gray-300 rounded shadow-sm py-1 px-2 focus:ring-indigo-500 focus:border-indigo-500 text-xs"
                                   type="text"
                                   x-model="glossary.details.replaceSummarySearch">
                        </div>
                        <div>
                            <label class="block font-medium text-gray-700 text-xs">Replacement</label>
                            <input class="mt-1 block w-full border border-gray-300 rounded shadow-sm py-1 px-2 focus:ring-indigo-500 focus:border-indigo-500 text-xs"
                                   x-model="glossary.details.replaceSummaryReplacement">
                        </div>
                        <button @click="replaceSummary(); changeValue('glossaryConfigTabs', glossaryConfigTabs)"
                                class="inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500">
                            Replace
                        </button>
                    </div>
                    <div>
                        <h4 class="font-medium text-gray-900 text-sm">Info</h4>
                        <p class="mt-1 text-xs text-gray-600">Update summary content for glossary entries. Will call
                            <code>mt_replace_summary</code> function</p>
                    </div>
                </div>

                <!-- Update Russian Name Tab -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-3"
                     x-show="glossaryConfigTabs.activeTab === 'updateTranslatedName'">
                    <div class="lg:col-span-2 space-y-2">
                        <div>
                            <label class="block font-medium text-gray-700 text-xs">Old RU Name</label>
                            <input class="mt-1 block w-full border border-gray-300 rounded shadow-sm py-1 px-2 focus:ring-indigo-500 focus:border-indigo-500 text-xs"
                                   type="text"
                                   x-model="glossary.details.updateRuNameOldRuName">
                        </div>
                        <div>
                            <label class="block font-medium text-gray-700 text-xs">New RU Name</label>
                            <input class="mt-1 block w-full border border-gray-300 rounded shadow-sm py-1 px-2 focus:ring-indigo-500 focus:border-indigo-500 text-xs"
                                   type="text"
                                   x-model="glossary.details.updateRuNameNewRuName">
                        </div>
                        <div>
                            <label class="block font-medium text-gray-700 text-xs">Name Filter (optional)</label>
                            <input class="mt-1 block w-full border border-gray-300 rounded shadow-sm py-1 px-2 focus:ring-indigo-500 focus:border-indigo-500 text-xs"
                                   placeholder="Filter by specific name..."
                                   type="text"
                                   x-model="glossary.details.updateRuNameNameFilter">
                        </div>
                        <div class="flex gap-2">
                            <button @click="previewUpdateRuName()"
                                    class="inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:ring-2 focus:ring-blue-500">
                                Preview Affected Chapters
                            </button>
                            <button @click="updateGlossaryRuName()"
                                    class="inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500">
                                Update
                            </button>
                        </div>
                        <!-- Affected Chapters Display -->
                        <div class="mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg"
                             x-show="glossary.details.updateRuNameAffectedChapters && glossary.details.updateRuNameAffectedChapters.length > 0">
                            <h4 class="text-sm font-medium text-yellow-800 mb-2">Affected Chapters:</h4>
                            <ol class="list-decimal list-inside space-y-1">
                                <template :key="chapterId"
                                          x-for="(chapterId, index) in glossary.details.updateRuNameAffectedChapters">
                                    <li class="text-sm text-yellow-800">
                                        <a :href="`/chapters?chapterId=${chapterId}`"
                                           class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200 transition-colors"
                                           x-text="`Chapter â„–${chapterId}`"></a>
                                    </li>
                                </template>
                            </ol>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-medium text-gray-900 text-sm">Info</h4>
                        <p class="mt-1 text-xs text-gray-600">Modify Russian names of glossary entries. Optionally
                            filter by name. Use preview to see affected chapters before updating. Will call <code>mt_update_glossary_runame</code>
                            function</p>
                    </div>
                </div>
            </div>
            <hr class="h-px mt-3 mb-6 bg-gray-200 border-0 dark:bg-gray-700">
        </td>
    </tr>
</div>
</body>
</html>
